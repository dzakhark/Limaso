$(function(){$(window).scroll(function(){var e=$(".header").eq(0),o=e.offset().top;0===$(window).scrollTop()?e.removeClass("sticky"):$(window).scrollTop()>=o&&e.addClass("sticky")}),$("button.hamburger").click(function(){$(this).toggleClass("is-active"),$(this).is(".is-active")?$(".header__nav").slideDown(1e3):$(".header__nav").slideUp(1e3)});var e=$(".price-from"),o=$(".price-to");e.val(0),o.val(1400);var n=e.val().length?$(".price-from").val():0,t=o.val().length?$(".price-to").val():1400;$(".range-form").on("change",function(){n=e.val(),t=o.val(),n>t&&(t=n,o.val(n)),$("#slider-range").slider({range:!0,min:0,max:1400,values:[n,t],slide:function(n,t){e.val(t.values[0]),o.val(t.values[1])}})}),$(".accordeon .acc-head").on("click",function(){$(".accordeon .acc-text").not($(this).next()).slideUp(500),$(".accordeon .acc-head").not($(this)).removeClass("active"),$(this).toggleClass("active").next().slideToggle(500)}),$("#slider-range").slider({range:!0,min:0,max:1400,values:[n,t],slide:function(n,t){e.val(t.values[0]),o.val(t.values[1])}}),$(".btn-dropdown").on("click",function(){$(".dropdown-content").slideToggle(500)}),$(".sort-item").on("click",function(){console.log($(".btn-dropdown").text()),$(".btn-dropdown").text($(this).text()),$(".dropdown-content").slideUp(500)}),$(document).click(function(e){$(e.target).closest(".btn-dropdown").length||($(".dropdown-content").slideUp(500),e.stopPropagation())});var r=$("#overlay"),a=$(".btn-buy, .btn-look"),i=$(".modal-close, #overlay"),s=$(".modal");a.click(function(e){e.preventDefault();var o=$(this).attr("href");r.fadeIn(400,function(){$(o).css("display","block").animate({opacity:1,top:"93px"},200)}),function(e){for(var o=$(".date-month"),n=0;n<e;n++)o.append("<option>"+(n+1)+"</option>")}(12)}),i.click(function(){s.animate({opacity:0,top:"45%"},200,function(){$(this).css("display","none"),r.fadeOut(400)}),d=!1,c=!1,l=!1,u=!1,$(".error.number").hide(),$(".number-inputs .item").css("border","1px solid #e4e9ee"),$(".error.date").hide(),$(".date-year, .date-month").css("border","1px solid #e4e9ee"),$(".error.name").hide(),$(".owner").css("border","1px solid #e4e9ee"),$(".error.code").hide(),$(".code.input").css("border","1px solid #e4e9ee")}),$(".error.number").hide(),$(".error.date").hide(),$(".error.name").hide(),$(".error.code").hide();var d=!1,c=!1,l=!1,u=!1;function p(){var e=$(".number-inputs .item");4===e.eq(0).val().length&&4===e.eq(1).val().length&&4===e.eq(2).val().length&&4===e.eq(3).val().length?($(".error.number").hide(),$(".number-inputs .item").css("border","1px solid #e4e9ee")):($(".error.number").html("В каждом поле должно быть 4 цифры").show(),$(".number-inputs .item").css("border","1px solid #F90A0A"),d=!0)}function h(){"- -"!==$(".date-year").val()&&"- -"!==$(".date-month").val()?($(".error.date").hide(),$(".date-year, .date-month").css("border","1px solid #e4e9ee")):($(".error.date").html("Заполните скок действия карты").show(),$(".date-year, .date-month").css("border","1px solid #F90A0A"),c=!0)}function m(){$(".owner").val().length>=4?($(".error.name").hide(),$(".owner").css("border","1px solid #e4e9ee")):($(".error.name").html("Введите имя (минимум 4 символа)").show(),$(".owner").css("border","1px solid #F90A0A"),l=!0)}function v(){3===$(".code.input").val().length?($(".error.code").hide(),$(".code.input").css("border","1px solid #e4e9ee")):($(".error.code").html("В поле должно быть 3 цифры").show(),$(".code.input").css("border","1px solid #F90A0A"),u=!0)}$(".number-inputs .item").focusout(function(){p()}),$(".date-year, .date-month").change(function(){h()}),$(".owner").focusout(function(){m()}),$(".code").focusout(function(){v()}),$(".owner").keypress(function(e){return/[a-zA-Zа-яА-ЯёЁіІїЇ .]/.test(String.fromCharCode(e.keyCode))}),$(".number-inputs .item").keypress(function(e){return e.charCode>=48&&e.charCode<=57}),$(".code.input").keypress(function(e){return e.charCode>=48&&e.charCode<=57}),$(".buy-form").submit(function(){return d=!1,c=!1,l=!1,u=!1,p(),h(),m(),v(),!1===d&&!1===c&&!1===l&&!1===u}),$(".btn-look").click(function(){$.ajax({url:"./show.txt",async:!0,success:function(e){e=JSON.parse(e),$("#modal-ajax .modal-title").html(e.title),$("#modal-ajax .p1").html(e.p1),$("#modal-ajax .p2").html(e.p2)}})})});